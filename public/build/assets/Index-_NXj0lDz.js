import{d as P,s as V,i as B,o as l,c as q,w as c,a as o,u as i,Z as $,b as t,x as g,l as v,m as x,e as h,p as y,h as _,v as p,F,y as N,O as m,t as n,k as E}from"./app-Bq8-TzmE.js";import{S as L}from"./SectionContainer-49OzEMUN.js";import{_ as M,c as R,f as K,a as j}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DWuAYgVp.js";import{_ as f}from"./DateInput.vue_vue_type_script_setup_true_lang-C3SDWOtl.js";import{P as z}from"./Pagination-C9hcPNHN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Caixas ",-1),A={class:"grid gap-2 justify-center items-center"},I=t("h2",{class:"text-3xl font-bold text-center"},"Pesquisas",-1),Q={class:"flex gap-6 flex-col lg:items-center lg:justify-center lg:flex-row"},U={class:"grid gap-2 my-2"},W=t("h3",{class:"text-lx font-semibold"},"Pesquisa por Data",-1),Z={class:"flex items-center gap-4"},G={class:"grid gap-2 my-2"},H=t("h3",{class:"text-lx font-semibold"}," Pesquisa por Período ",-1),J={class:"flex lg:items-center flex-col lg:flex-row gap-4"},X={class:"grid lg:grid-cols-3 gap-6"},Y={key:0,class:"text-center"},tt=t("h1",{class:"text-2xl font-bold py-16"}," Nenhum caixa encontrado. ",-1),et=[tt],st={key:1,class:"overflow-x-auto"},at={class:"table table-xs"},ot=t("th",null,null,-1),nt=t("th",null,"Empresa",-1),lt=t("th",null,"Responsável",-1),rt=t("th",null,"Data",-1),dt=t("th",null,"Total",-1),ct=t("th",null,"Vendas",-1),it=t("th",null,"Status",-1),ht=["onClick"],ut=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M4 22V8h3V6q0-2.075 1.463-3.537T12 1t3.538 1.463T17 6v2h3v14zm8-5q.825 0 1.413-.587T14 15t-.587-1.412T12 13t-1.412.588T10 15t.588 1.413T12 17M9 8h6V6q0-1.25-.875-2.125T12 3t-2.125.875T9 6z"})],-1),_t=[ut],pt=t("th",null,null,-1),mt=t("th",null,"Empresa",-1),ft=t("th",null,"Responsável",-1),gt=t("th",null,"Data",-1),vt=t("th",null,"Total",-1),xt=t("th",null,"Vendas",-1),yt=t("th",null,"Status",-1),Pt=P({__name:"Index",props:{cashiers:{},search:{}},setup(b){const r=b,s=V({page:1,start_date:r.search.start_date??"",end_date:r.search.end_date??"",date:r.search.date??""}),S=B(()=>r.cashiers.links.map(e=>{if(e.url===null)return e;let u=new URL(e.url);for(const a in s)a!=="page"&&s[a]!==""&&u.searchParams.set(a,s[a]);return{...e,url:`${u}`}})),d=()=>{R(s),s.start_date&&s.end_date&&(s.date=""),m.get(route("cashiers.index",{...s}),{},{preserveState:!0,preserveScroll:!0})},w=()=>{s.start_date="",s.date="",m.get(route("cashiers.index"),{},{preserveScroll:!0})},k=e=>{s.date=e,d()},C=e=>{s.start_date=e},T=e=>{s.end_date=e},D=e=>{m.patch(route("cashiers.update",e),{},{preserveState:!0})};return(e,u)=>(l(),q(M,null,{header:c(()=>[O]),default:c(()=>[o(i($),{title:"Caixa"}),o(L,null,{default:c(()=>[t("div",A,[I,t("div",Q,[t("div",U,[W,t("div",Z,[o(f,{onSearchDate:k,d:s.date},null,8,["d"])])]),t("div",G,[H,t("div",J,[o(f,{onSearchDate:C,d:s.start_date,onKeyup:g(d,["enter"])},null,8,["d"]),v(" até "),o(f,{onSearchDate:T,d:s.end_date,onKeyup:g(d,["enter"])},null,8,["d"])])])]),t("div",X,[t("button",{type:"button",class:"btn btn-primary lg:col-span-2",onClick:x(d,["prevent"])}," Pesquisar "),t("button",{type:"button",class:"btn btn-secondary",onClick:x(w,["prevent"])}," Limpar ")])]),e.cashiers.data.length?y("",!0):(l(),h("div",Y,et)),e.cashiers.data.length?(l(),h("div",st,[t("table",at,[t("thead",null,[t("tr",null,[ot,nt,lt,rt,dt,ct,it,_(t("th",null," Fechar ",512),[[p,e.$page.props.auth.user.role!=="cashier"]])])]),t("tbody",null,[(l(!0),h(F,null,N(e.cashiers.data,a=>(l(),h("tr",{key:a.id},[t("th",null,n(a.id),1),t("td",null,n(a.company.name),1),t("td",null,n(a.user.name),1),t("td",null,n(i(K)(a.created_at)),1),t("td",null,n(i(j)(a.total)),1),t("td",null,[o(i(E),{href:e.route("sells.index",{date:a.created_at}),class:"btn btn-primary btn-xs"},{default:c(()=>[v("Vendas")]),_:2},1032,["href"])]),t("td",null,n(a.active?"Aberto":"Fechado"),1),_(t("td",null,[t("button",{onClick:bt=>D(a.id)},_t,8,ht)],512),[[p,e.$page.props.auth.user.role!=="cashier"]])]))),128))]),t("tfoot",null,[t("tr",null,[pt,mt,ft,gt,vt,xt,yt,_(t("th",null," Fechar ",512),[[p,e.$page.props.auth.user.role!=="cashier"]])])])])])):y("",!0),o(z,{class:"mt-6",links:S.value},null,8,["links"])]),_:1})]),_:1}))}});export{Pt as default};
